{% extends "base.html" %}

{% block title %}‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô{% endblock %}

{% block content %}
<div class="container" style="max-width: 1000px; margin: 0 auto; padding: 2rem 1rem;">

  <h1 style="margin-bottom: 2rem;">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>

  {% if orders %}
    {% for order_id, order in orders|dictsort(reverse=true) %}
      <div style="background: white; border-radius: 12px; box-shadow: var(--shadow-md); margin-bottom: 2rem; overflow: hidden;">

        <div style="padding: 1.5rem; background: #f8fafc; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
          <div>
            <h3 style="margin: 0;">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #{{ order.id }}</h3>
            <small style="color: #6b7280;">{{ order.created_at|dateformat }}</small>
            <small style="color: #6b7280;">‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏à‡πâ‡∏á‡∏î‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå 092-249 8938 ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏∏‡πä</small>
          </div>

          <div style="text-align: right;">
            <div style="margin-bottom: 0.5rem;">
              {% if order.status == 'pending' %}
                <span style="background: #fef3c7; color: #92400e; padding: 0.5rem 1rem; border-radius: 999px; font-weight: 600;">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</span>
              {% elif order.status == 'confirmed' %}
                <span style="background: #d1fae5; color: #065f46; padding: 0.5rem 1rem; border-radius: 999px; font-weight: 600;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>
              {% else %}
                <span style="background: #e5e7eb; color: #374151; padding: 0.5rem 1rem; border-radius: 999px;">{{ order.status|default('‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏') }}</span>
              {% endif %}
            </div>
            <strong>{{ order.total|int }} ‡∏ö‡∏≤‡∏ó</strong>
          </div>
        </div>

        <div style="padding: 1.5rem;">
          <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á:</strong> {{ order.customer_name }}</p>
          <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> {{ order.phone }}</p>

          <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
              <tr style="background: #f3f4f6;">
                <th style="padding: 0.75rem; text-align: left;">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th style="padding: 0.75rem; text-align: right;">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th style="padding: 0.75rem; text-align: center;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <th style="padding: 0.75rem; text-align: right;">‡∏£‡∏ß‡∏°</th>
              </tr>
            </thead>
            <tbody>
              {% for item in order["items"] %}

                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 0.75rem;">{{ item.product }}</td>
                  <td style="padding: 0.75rem; text-align: right;">{{ item.price|int }} ‡∏ö‡∏≤‡∏ó</td>
                  <td style="padding: 0.75rem; text-align: center;">{{ item.qty }}</td>
                  <td style="padding: 0.75rem; text-align: right;">{{ item.subtotal|int }} ‡∏ö‡∏≤‡∏ó</td>
                </tr>
              {% endfor %}
              <tr style="font-weight: bold; background: #f9fafb;">
                <td colspan="3" style="padding: 0.75rem; text-align: right;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</td>
                <td style="padding: 0.75rem; text-align: right;">{{ order.total|int }} ‡∏ö‡∏≤‡∏ó</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div style="text-align: center; padding: 4rem 1rem; background: white; border-radius: 12px; box-shadow: var(--shadow-md);">
      <div style="font-size: 4rem; margin-bottom: 1rem;">üì≠</div>
      <h3>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
      <p style="color: #6b7280; margin: 1rem 0;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
      <a href="/" class="btn btn-primary" style="padding: 0.8rem 2rem;">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
    </div>
  {% endif %}

</div>
{% endblock %}