{% extends "base.html" %}

{% block title %}‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô{% endblock %}

{% block content %}
<div class="container" style="max-width: 1000px; margin: 0 auto; padding: 2rem 1rem;">

  <h1 style="margin-bottom: 2rem;">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>

  {% if orders %}
    {% for order_id, order in orders|dictsort(reverse=true) %}
      <div style="background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 2.5rem; overflow: hidden;">

        <!-- Header -->
        <div style="padding: 1.5rem; background: #f8fafc; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
          <div>
            <h3 style="margin: 0 0 0.25rem;">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #{{ order.id }}</h3>
            <small style="color: #6b7280;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: {{ order.created_at|dateformat }}</small>
          </div>

          <div style="text-align: right;">
            <div style="margin-bottom: 0.5rem;">
              {% if order.status == 'pending' %}
                <span style="background: #fef3c7; color: #92400e; padding: 0.5rem 1.2rem; border-radius: 999px; font-weight: 600;">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</span>
              {% elif order.status == 'confirmed' %}
                <span style="background: #dbeafe; color: #1e40af; padding: 0.5rem 1.2rem; border-radius: 999px; font-weight: 600;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>
              {% elif order.status == 'preparing' %}
                <span style="background: #f3e8ff; color: #6b21a8; padding: 0.5rem 1.2rem; border-radius: 999px; font-weight: 600;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏Ç‡∏≠‡∏á</span>
              {% elif order.status == 'completed' %}
                <span style="background: #d1fae5; color: #065f46; padding: 0.5rem 1.2rem; border-radius: 999px; font-weight: 600;">‡∏õ‡∏¥‡∏î‡∏à‡πä‡∏≠‡∏ö / ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</span>
              {% else %}
                <span style="background: #e5e7eb; color: #374151; padding: 0.5rem 1.2rem; border-radius: 999px; font-weight: 600;">{{ order.status|default('‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏') }}</span>
              {% endif %}
            </div>
            <strong style="font-size: 1.3rem;">{{ order.total|int }} ‡∏ö‡∏≤‡∏ó</strong>
          </div>
        </div>

        <!-- Body -->
        <div style="padding: 1.75rem;">

          <div style="display: flex; flex-wrap: wrap; gap: 2rem; margin-bottom: 1.5rem;">
            <div><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á:</strong> {{ order.customer_name }}</div>
            <div><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> {{ order.phone }}</div>
          </div>

          <!-- ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
          <div style="background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 8px; padding: 1.25rem; margin-bottom: 1.75rem; line-height: 1.6;">
            {% if order.status == 'pending' %}
              <strong style="color: #1e40af;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</strong><br>
              ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå<br>
              <small>‡∏´‡∏≤‡∏Å‡∏£‡∏≠‡∏ô‡∏≤‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏ó‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà 092-249 8938 (‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏∏‡πä)</small>

            {% elif order.status == 'confirmed' %}
              <strong style="color: #1e40af;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß</strong><br>
              ‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

            {% elif order.status == 'preparing' %}
              <strong style="color: #6b21a8;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏Ç‡∏≠‡∏á</strong><br>
              <strong style="color: #c026d3;">‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</strong><br>
              ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #{{ order.id }} ‡∏Å‡∏±‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô

            {% elif order.status == 'completed' %}
              <strong style="color: #065f46;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏õ‡∏¥‡∏î‡∏à‡πä‡∏≠‡∏ö / ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</strong><br>
              ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üíê

            {% else %}
              <strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: {{ order.status|default('‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏') }}</strong>
            {% endif %}
          </div>

          <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
          <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
              <tr style="background: #f3f4f6;">
                <th style="padding: 0.9rem; text-align: left;">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th style="padding: 0.9rem; text-align: right;">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th style="padding: 0.9rem; text-align: center;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <th style="padding: 0.9rem; text-align: right;">‡∏£‡∏ß‡∏°</th>
              </tr>
            </thead>
            <tbody>
              {% for item in order["items"] %}
                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 0.9rem;">{{ item.product }}</td>
                  <td style="padding: 0.9rem; text-align: right;">{{ item.price|int }} ‡∏ö‡∏≤‡∏ó</td>
                  <td style="padding: 0.9rem; text-align: center;">{{ item.qty }}</td>
                  <td style="padding: 0.9rem; text-align: right;">{{ item.subtotal|int }} ‡∏ö‡∏≤‡∏ó</td>
                </tr>
              {% endfor %}
              <tr style="font-weight: bold; background: #f9fafb;">
                <td colspan="3" style="padding: 0.9rem; text-align: right;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</td>
                <td style="padding: 0.9rem; text-align: right;">{{ order.total|int }} ‡∏ö‡∏≤‡∏ó</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div style="text-align: center; padding: 5rem 1rem; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
      <div style="font-size: 5rem; margin-bottom: 1.25rem;">üì≠</div>
      <h3>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
      <p style="color: #6b7280; margin: 1.25rem 0 2rem;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
      <a href="/" class="btn btn-primary" style="padding: 0.9rem 2.2rem; font-size: 1.1rem;">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
    </div>
  {% endif %}

</div>
{% endblock %}